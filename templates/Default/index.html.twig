{% extends "layout.html.twig" %}

{% block content %}
    <!-- En-Tête -->
    <div class="col-md-12 d-none d-lg-block header">
        <h1>Avec Iceberg trouvez rapidement un appel à candidature <br>dans le domaine artistique qui vous correspond !</h1>


    </div>

    {# Affichage des notifications #}
    <div class="container ">
        {% for message in app.flashes('notice') %}
            <div class="alert alert-info">
                {{ message }}
            </div>
        {% endfor %}
    </div>

    <main>
        <div class="container contenu">
            <div class="row">
                <!-- ############# SIDEBAR FILTRES ############### -->

                {{ render(controller('App\\Controller\\Iceberg\\DefaultController::sidebar')) }}
                <!-- ############# FIN SIDEBAR FILTRES ############### -->

                {% include 'Components/_modalProfil.html.twig' %}

                <!-- ############# CARTES ############### -->
                <div class="col-lg-9 col-10 carte-groupe">
                    <!-- Cartes en cours -->
                    {% for projet in projetsEnCours %}
                        <!-- Calcul des jours restants -->
                        {% set difference = date(projet.dateFinInscription).diff(date("now")) %}
                        {% set leftDays = difference.days+1 %}
                        {% include 'Components/_carteIndex.html.twig' %}
                                    <div class="myloader text-center">
                                        <!-- Gestion des couleurs -->
                                        {% if leftDays < 11 %}
                                            {% set couleur = "red" %}

                                        {% elseif leftDays < 31 %}
                                            {% set couleur = "yellow" %}

                                        {% else %}
                                            {% set couleur = "green" %}
                                        {% endif %}
                                        <div class="titre-compteur">
                                            nombre de jour restants
                                        </div>
                                        <hr id="barre">
                                        <p class="debut">Date de début
                                            : {{ projet.dateDebutInscription | date('d/m/Y') }}</p>
                                        {% if leftDays == 1 %}
                                            <p class="myloader-text">Dernier jour d'inscription</p>
                                        {% else %}
                                            <div class="center">
                                                <svg class="progress {{ couleur }}"
                                                     data-progress="{{ leftDays }}" x="0px" y="0px"
                                                     viewBox="0 0 80 80">
                                                    <path class="track"
                                                          d="M5,40a35,35 0 1,0 70,0a35,35 0 1,0 -70,0"/>
                                                    <path class="fill"
                                                          d="M5,40a35,35 0 1,0 70,0a35,35 0 1,0 -70,0"/>
                                                    <text class="value" x="50%" y="55%">0</text>
                                                </svg>
                                            </div> <!-- FIN div.center -->
                                        {% endif %}
                                    </div> <!-- FIN div.myloader -->
                                </div> <!-- FIN div.col-md-2.order-md-1 -->
                            </div> <!-- FIN div.row.no-gutters.justify-content-between -->
                        </div> <!-- FIN div.card.mb-5.mt-5.box-shadow -->
                    {% endfor %}
                    <!-- FIN Cartes en cours -->

                    <!-- Cartes a venir-->
                    {% for projet in projetsDebut %}
                        {% include 'Components/_carteIndex.html.twig' %}
                                    <div class="myloader text-center texte-centre">
                                        <p class="myloader-text">Début des inscriptions
                                            le {{ projet.dateDebutInscription | date('d/m/Y') }}</p>
                                    </div> <!-- FIN div.myloader -->
                                </div> <!-- FIN div.col-md-2.order-md-1 -->
                            </div> <!-- FIN div.row.no-gutters.justify-content-between -->
                        </div> <!-- FIN div.card.mb-5.mt-5.box-shadow -->
                    {% endfor %}
                    <!-- FIN Cartes a venir -->

                    <!-- Cartes terminées-->
                    {% for projet in projetsFin %}
                        {% include 'Components/_carteIndex.html.twig' %}
                                    <div class="myloader text-center texte-centre">
                                        <p class="myloader-text">Inscriptions terminées depuis
                                            le {{ projet.dateFinInscription | date('d/m/Y') }}</p>
                                    </div> <!-- FIN div.myloader -->
                                </div> <!-- FIN div.col-md-2.order-md-1 -->
                            </div> <!-- FIN div.row.no-gutters.justify-content-between -->
                        </div> <!-- FIN div.card.mb-5.mt-5.box-shadow -->
                    {% endfor %}
                    <!-- FIN Cartes terminées-->
                </div> <!-- FIN div.col-lg-10.col-md-6 -->
            </div> <!-- FIN div.row  -->
        </div> <!-- FIN div.container -->
    </main>

{% endblock %}

